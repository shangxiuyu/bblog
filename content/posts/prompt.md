---
title: "prompt"
date: 2025-03-22
draft: false
tags: ["AI", "Prompt", "如何写好提示词", "大模型应用开发"]
---

提示词是给生成式大模型的输入，用于指导其生成输出内容。

一按来说，prompt分为系统提示词和用户提示词

- 系统提示词：对任务的背景描述，角色扮演的背景信息一般都推荐放到 System Prompt 中（系统提示），后续对话中会遵循 系统提示中的描述
- 用户提示词：用户输入，一般是用户与llm应用交互的语言描述


针对系统提示词，我们如何进行有效的编写？


<img width="862" alt="image" src="https://github.com/user-attachments/assets/eca694f5-9339-4ab3-821f-d88dc090c12a" />


## 关于系统提示词

llm可以被看成是一个可以调用的函数、接口，本身只能被调用，它会根据你的prompt返回给你对应的结果，比如现在所有的llm应用产品（chatgpt、claude、元宝、豆包等）都有一套自己的提示词系统，包括Agent、workflow等。

比如绝大多数的llm客户端产品会在自己的提示词系统里设置禁止回答色情、违法等内容，llm本身是可以生成这些内容，只不过可能在提示词框架里限制了回答或者在llm数据训练的时候剔除避开这部分的数据


## 提示词的难点在于哪里

如何用一段自然语言让llm理解你的意图，并按照你的想法输出你想要的结果


大模型是一个黑盒，即使是模型的开发人员可能也不知道输入的每句话每个词是在模型内容如何触发某些神经元链路的，由此研究人员就根据直觉和实验尝试了很多技巧



## 如何写好一个提示词：Prompt的道与术


### prompt的道：清晰表达

> 理清思路+清晰表达+极致压缩
>

**业务理解远胜于提示词框架**

如果对于业务不够深入理解，那么不太可能写出一个好的提示词
举个例子:
写一个 对话人设，让AI 完全模仿真人在微信聊天中的语气和感觉。如果不是细心观察，多次尝试摸索是写不出下面这段 Prompt 的：

  1. 说话都是短句，每句话不超过10个字，一次回复不超过3句话。
  2. 输出多句话时，换行发送，一句话一行。
  3. 用空格分隔两个句子，句子与句子间不打标点符号。

**对业务的理解胜过一切，将这种理解转化为清晰的表达更为重要。**


**理清思路**：
在表达之前，我们要先理清我们大脑中的思路，这个思路是针对业务的理清思路，我们要利用哪些知识去实现我们的业务目标？这个时候我们大脑中肯定会有很多点状、发散的知识点，可能有的知识点之间还没有想清楚怎么关联起来

我们可以借助白板、思维导图或者流程图等工具帮我们梳理思路

举个例子：
某企业为餐饮门店提供SaaS经营工具帮助门店提高经营效率，通过监控门店的一些数据指标（比如营业额、客单价、新老客、商品销售额、笔均价等）呈现给老板，现在如果想利用llm分析数据指标来给老板一些数据洞察和经营建议，prompt提示词该如何写？

这个时候最重要的是理清你的思路，我们可以具像化、拆解成子问题一步步理清思路：
我一般的思路是目的先行，根据输出倒推输入
- 我想给老板输出一份什么内容？或者说老板期望看到一份什么样的经营报告？——样式+内容
  - 样式：需要注意内容的呈现样式，比如图+文，比如结论先行，比如分段，比如字数篇幅限制，比如避免专业词汇，比如颜色怎么搭配，比如内容怎么易读性更强等
  - 内容：需要输出哪些模块内容，比如对本周的经营做一个总结、比如分析某异常指标客单价下降的原因，比如针对问题给出一个专业性的建议等等
 
- 我/llm需要从哪些纬度/角度去思考：确保逻辑上的闭环和没有谬误（llm经常一本正经的胡说八道，看起来好像很正确，但仔细推敲，其实有些结论逻辑没有闭环）
  - 比如某天的营业额比前几天下降了10%，可能是什么原因呢？根据对于业务的理解，可能是商户更改了商品，商品调了价、可能是今天天气不好，导致顾客少、可能是因为休息日，附近少了很多吃饭的打工人，可能是商户的某菜品没有准备充分的库存等等
    - 我们可以抽象出两个大概的纬度：外部因素和内部因素，外部因素比如因为天气、比如因为相关热点新闻政策等，内部因素比如商户的经营行为数据（新增商品、商品改价等）、平台运营数据，比如企业做了相关运营动作等等
    - 我们通过各种维度和数据进行结合分析，才会能更加准确的分析推断出问题
    - 举个例子：A门店的营业额某天异常的上升了30%，门店客单价也异常上升，新客户呈上升趋势，老客户没有异常波动，我们可以先从内部维度去分析：发现商户没有任何经营动作，没有商品或者会员储值等行为数据，平台也没有相关的行为数据，从外部分析，推测可能是近期的政府消费券补贴导致的
- 最后，根据上述的思路，我们应该准备哪些数据给到llm，比如关键的经营数据，比如商品数据、比如商户经营动作数据等等

通过上述的思考，我们大概已经把思路捋清楚了


**清晰表达：**
有很多表达框架可以帮助我们理清思路，比如经典的金字塔结构

这个时候可以把我们脑子里想的所有的内容都写出来，详细把我们想要的结果通过语言描述出来

需要注意的是，表达的时候一定要具体，不能模糊和有歧义，人与人之间的交流有时候就是模糊和模棱两可的，但与AI的交流要具体和明确
比如：给老板输出一份美观可视化的经营报告
这句话很模糊，不够具体：
- 什么才算是美观的，这里需要给AI具体描述：比如字体通义用思远黑体，在关键的数据后需要折线图或者饼状图，比如分段等

细化背景明确场景或领域，以便模型可以对问题进行准确的上下文理解信息
具体化目说明你期望的输出类型和深度，例如，指定是要“简要总结”还是“详细分析标


**极致压缩：**
过长的提示词可能会导致过多上下文窗口的占用，导致llm输出的时候忽略一些信息
我们可以省略一些非必要的信息


<img width="705" alt="image" src="https://github.com/user-attachments/assets/cc7f856b-43e5-4983-a61f-78f1747b93d7" />


### Prompt的术：三板斧

- 指令描述
- 思维链
- 举例子：正例+反例

#### 指令描述

这里很多人对给llm设定一个角色，比如扮演一个哲学家、扮演一个数据分析专家，这样可以让llm聚焦于某个领域，不至于回答的时候天马行空
模型本身内部数据附带着某些任务特征，再比如用鲁迅的口吻描写输出内容；20岁的大学生视角等，这类角色扮演很有效

skills：需要给予这个角色一些技能指令：
比如擅长不同数据之间的多维整合，善于从数据背后洞察经营本质，擅长数据图表的可视化制作等

goals：需要给予llm目标的准确描述
让它理解你想要输出一份什么样的内容
比如根据商家原始数据，计算本周关键经营指标，自动生成趋势表格和图表。
多维交叉分析，发现“被忽视的现象”并输出具体建议，给出具体设置方案，避免模糊建议。每条建议包括：
- 建议原因：根据现象发掘背后的原因

#### 思维链

让llm一步一步思考，我们也可以限制下我们的workflow，让他遵循工作流去一步步思考

比如
1、根据商户的关键经营指标去整理和汇总
2、根据数据的变化趋势分析背后的原因
2.1、从上至下分析：营业额——>用户客单价——>新老客
2.2，由外到内分析：外部因素——>内部因素
3、输出数据和数据背后的原因和解决方案

#### 举例子

为了llm更好的理解，我们可以具一个具体的例子：
- 本周营业额35,826元，共860单，新顾客346人，回头客421人，退款金额85元。日均营业额5,118元，主力产品为招牌牛肉面、钢签羊肉串、传统牛肉面。与上周相比，营业额-4.9%，订单-3.3%，新顾客+5.2%，回头客-9.3%，退款+57%。’‘’
多维交叉分析通用表达式：
2. 用数字+趋势点明现象，直接点出“老板你可以关注什么、试试什么”，如：“传统牛肉面+青海手工酸奶有23单组合，联动率18%。建议午餐推‘面+饮品’套餐，抓住加饮品需求。”


推荐阅读：
- https://langgptai.feishu.cn/wiki/RXdbwRyASiShtDky381ciwFEnpe
- https://vxc3hj17dym.feishu.cn/wiki/VDb1wMKDNiNj0mkJn6VcFgRenVc
